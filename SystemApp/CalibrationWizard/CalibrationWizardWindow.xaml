<Window x:Class="KinectCalibrationWPF.CalibrationWizard.CalibrationWizardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="clr-namespace:KinectCalibrationWPF.UI"
        Title="Calibration Wizard - Screen 1: Define Interactive Area" 
        Height="700" Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">
    
    <Window.Resources>
        <!-- Define WizardButtonStyle locally -->
        <Style x:Key="WizardButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#2196F3"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1976D2"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#1565C0"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" Background="#2196F3" Padding="20">
            <StackPanel>
                <TextBlock Text="Calibration Wizard - Screen 1" 
                           FontSize="24" FontWeight="Bold" 
                           Foreground="White" HorizontalAlignment="Center"/>
                <TextBlock Text="Define Interactive Area: Click the four corners of your interactive area. Drag points to adjust." 
                           FontSize="14" Foreground="#E3F2FD" 
                           HorizontalAlignment="Center" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>
        
        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
			<!-- Camera Feed with Movable Points -->
			<Border Grid.Column="0" Background="White" CornerRadius="8" 
					Margin="0,0,10,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Camera Feed -->
                    <Border Grid.Row="0" Background="#2C2C2C" Margin="10">
                        <Grid>
                            <Image x:Name="CameraFeedImage" Stretch="Uniform" />
                            
                            <!-- Movable Points Overlay -->
                            <ui:MovablePointsCanvas x:Name="MovablePoints" Background="Transparent"/>
                        </Grid>
                    </Border>
                    
                    <!-- Camera Feed Status -->
                    <Border Grid.Row="1" Background="#F0F0F0" Padding="10">
                        <TextBlock x:Name="CameraStatusText" Text="Camera: Initializing..." 
                                   HorizontalAlignment="Center" FontSize="12"/>
                    </Border>
                </Grid>
            </Border>
            
			<!-- Control Panel -->
			<Border Grid.Column="1" Background="White" CornerRadius="8" 
					Margin="10,0,0,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        
                        <!-- Instructions -->
                        <TextBlock Text="Instructions" FontSize="18" FontWeight="Bold" 
                                   Foreground="#424242" Margin="0,0,0,10"/>
                        <TextBlock Text="1. Click the four corners in order (TL, TR, BR, BL)&#x0a;2. Drag points to adjust their positions&#x0a;3. Points are stored as normalized coordinates and stay anchored on resize&#x0a;4. The plane is calculated from the first three 3D points" 
                                   TextWrapping="Wrap" Margin="0,0,0,20" Foreground="#666666"/>
                        
                        <!-- Point Status -->
                        <TextBlock Text="Point Status" FontSize="16" FontWeight="Bold" 
                                   Foreground="#424242" Margin="0,0,0,10"/>
                        <Border Background="#F8F9FA" Padding="15" CornerRadius="5" Margin="0,0,0,20">
                            <StackPanel>
                                <TextBlock x:Name="PointCountText" Text="Points: 0/4" 
                                           FontSize="14" FontWeight="SemiBold"/>
                                <TextBlock x:Name="PointStatusText" Text="Click to place first corner" 
                                           FontSize="12" Foreground="#666666" Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>
                        
                        <!-- Action Buttons -->
                        <TextBlock Text="Actions" FontSize="16" FontWeight="Bold" 
                                   Foreground="#424242" Margin="0,0,0,10"/>
                        
                        <Button x:Name="CalculatePlaneButton" Content="Calculate Plane" 
                                Style="{StaticResource WizardButtonStyle}" Margin="0,0,0,10"
                                Click="CalculatePlaneButton_Click" IsEnabled="False"/>
                        
                        <Button x:Name="ResetPointsButton" Content="Reset Points" 
                                Style="{StaticResource WizardButtonStyle}" Margin="0,0,0,10"
                                Click="ResetPointsButton_Click" IsEnabled="False"/>
                        
                        <Button x:Name="NextButton" Content="Next" 
                                Style="{StaticResource WizardButtonStyle}" Margin="0,20,0,10"
                                Click="NextButton_Click" IsEnabled="False"/>
                        
                        <Button x:Name="CancelButton" Content="Cancel" 
                                Style="{StaticResource WizardButtonStyle}" 
                                Background="#F44336" Click="CancelButton_Click"/>
                        
                        <!-- Status Display -->
                        <TextBlock Text="Status" FontSize="16" FontWeight="Bold" 
                                   Foreground="#424242" Margin="0,20,0,10"/>
                        <Border Background="#E8F5E8" Padding="15" CornerRadius="5">
                            <TextBlock x:Name="StatusText" Text="Ready to start calibration" 
                                       FontSize="12" Foreground="#2E7D32"/>
                        </Border>

                        <!-- Measures Display -->
                        <TextBlock x:Name="MeasuresText" Text="" FontSize="12" Foreground="#333" Margin="0,8,0,0"/>

                        <!-- Live Frame Counters -->
                        <TextBlock Text="Streams" FontSize="16" FontWeight="Bold" 
                                   Foreground="#424242" Margin="0,20,0,10"/>
                        <Border Background="#F8F9FA" Padding="10" CornerRadius="5">
                            <TextBlock x:Name="FrameCountersText" Text="Color: 0 | Depth: 0"
                                       FontSize="12" Foreground="#333"/>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
        
        <!-- Footer -->
        <Border Grid.Row="2" Background="#424242" Padding="10">
            <TextBlock Text="Screen 1 of 3: Define Interactive Area" 
                       Foreground="White" HorizontalAlignment="Center" FontSize="12"/>
        </Border>
    </Grid>
</Window>
